A new MySQL server needs to be deployed on Kubernetes cluster. The Nautilus DevOps team was working on to gather the requirements. Recently they were able to finalize the requirements and shared them with 
the team members to start working on it. Below you can find the details:

            1.) Create a PersistentVolume mysql-pv, its capacity should be 250Mi, set other parameters as per your preference.

            2.) Create a PersistentVolumeClaim to request this PersistentVolume storage. Name it as mysql-pv-claim and request a 250Mi of storage. Set other parameters as per your preference.

            3.) Create a deployment named mysql-deployment, use any mysql image as per your preference. Mount the PersistentVolume at mount path /var/lib/mysql.

            4.) Create a NodePort type service named mysql and set nodePort to 30007.

            5.) Create a secret named mysql-root-pass having a key pair value, where key is password and its value is YUIidhb667, create another secret named mysql-user-pass having some key pair values, where frist key 
                is username and its value is kodekloud_pop, second key is password and value is LQfKeWWxWD, create one more secret named mysql-db-url, key name is database and value is kodekloud_db9

            6.) Define some Environment variables within the container:

                      a) name: MYSQL_ROOT_PASSWORD, should pick value from secretKeyRef name: mysql-root-pass and key: password

                      b) name: MYSQL_DATABASE, should pick value from secretKeyRef name: mysql-db-url and key: database

                      c) name: MYSQL_USER, should pick value from secretKeyRef name: mysql-user-pass key key: username

                      d) name: MYSQL_PASSWORD, should pick value from secretKeyRef name: mysql-user-pass and key: password

Note: The kubectl utility on jump_host has been configured to work with the kubernetes cluster.

************************** SOLUTION ***************************************************
thor@jump_host ~$ kubectl get all
NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
service/kubernetes   ClusterIP   10.96.0.1    <none>        443/TCP   30m
thor@jump_host ~$ kubectl create secret generic mysql-root-pass --from-literal=password=YUIidhb667
secret/mysql-root-pass created
thor@jump_host ~$ kubectl create secret generic mysql-user-pass --from-literal=username=kodekloud_pop --from-literal=password=LQfKeWWxWD
secret/mysql-user-pass created
thor@jump_host ~$ kubectl create secret generic mysql-db-url --from-literal=database=kodekloud_db9
secret/mysql-db-url created
thor@jump_host ~$ kubectl get secret
NAME              TYPE     DATA   AGE
mysql-db-url      Opaque   1      15s
mysql-root-pass   Opaque   1      2m19s
mysql-user-pass   Opaque   2      55s
thor@jump_host ~$ vi /tmp/mysql-k8.yml
thor@jump_host ~$ cat /tmp/mysql-k8.yml
---                                                                                           
apiVersion: v1                                                                                
kind: PersistentVolume                                                                        
metadata:                                                                                     
  name: mysql-pv                                                                              
spec:                                                                                         
  capacity:                                                                                   
    storage: 250Mi     
  accessModes:                                                                                
    - ReadWriteOnce                                                                           
  hostPath:                                                                                   
    path: "/var/lib/mysql"                                                                    
---                                                                                           
apiVersion: v1                                                                                
kind: PersistentVolumeClaim                                                                   
metadata:                                                                                     
  name: mysql-pv-claim                                                                        
spec:                                                                                         
  accessModes:                                                                                
    - ReadWriteOnce                                                                           
  resources:                                                                                  
    requests:                                                                                 
      storage: 250Mi                                                                          
---
apiVersion: v1
kind: Service
metadata:
  name: mysql
spec:
  type: NodePort
  selector:
    app: mysql
  ports:
    - port: 3306
      targetPort: 3306
      nodePort: 30007
---       
apiVersion: apps/v1
kind: Deployment
metadata:
  name: mysql-deployment
  labels:
    app: mysql
spec:
  replicas: 1
  selector:
    matchLabels:
      app: mysql
  template:
    metadata:
      labels:
        app: mysql
    spec:
      volumes:
      - name: mysql-pv
        persistentVolumeClaim:
          claimName: mysql-pv-claim
      containers:
      - name: mysql
        image: mysql:latest
        env:
        - name: MYSQL_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mysql-root-pass
              key: password
        - name: MYSQL_DATABASE
          valueFrom:
            secretKeyRef:
              name: mysql-db-url
              key: database
        - name: MYSQL_USER
          valueFrom:
            secretKeyRef:
              name: mysql-user-pass
              key: username
        - name: MYSQL_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mysql-user-pass
              key: password
        volumeMounts:
        - name: mysql-pv
          mountPath: /var/lib/mysql
        ports:
        - containerPort: 3306
          name: mysql

thor@jump_host ~$ kubectl create -f /tmp/mysql-k8.yml
persistentvolume/mysql-pv created
persistentvolumeclaim/mysql-pv-claim created
service/mysql created
deployment.apps/mysql-deployment created

***************************** VERIFICATION ****************************************************

thor@jump_host ~$ kubectl get po
NAME                               READY   STATUS              RESTARTS   AGE
mysql-deployment-8b94c65c8-w2lxs   0/1     ContainerCreating   0          13s
thor@jump_host ~$ kubectl get deploy
NAME               READY   UP-TO-DATE   AVAILABLE   AGE
mysql-deployment   0/1     1            0           22s
thor@jump_host ~$ kubectl get pv
NAME                                       CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM                    STORAGECLASS   REASON   AGE
mysql-pv                                   250Mi      RWO            Retain           Available                                                    27s
pvc-24d4fbe4-66e8-428b-8e97-d50d4e120734   250Mi      RWO            Delete           Bound       default/mysql-pv-claim   standard                22s
thor@jump_host ~$ kubectl get pvc
NAME             STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
mysql-pv-claim   Bound    pvc-24d4fbe4-66e8-428b-8e97-d50d4e120734   250Mi      RWO            standard       33s
thor@jump_host ~$ kubectl get svc
NAME         TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
kubernetes   ClusterIP   10.96.0.1      <none>        443/TCP          39m
mysql        NodePort    10.96.224.32   <none>        3306:30007/TCP   39s
thor@jump_host ~$ kubectl get po
NAME                               READY   STATUS    RESTARTS   AGE
mysql-deployment-8b94c65c8-w2lxs   1/1     Running   0          46s
thor@jump_host ~$ kubectl exec -i mysql-deployment-8b94c65c8-w2lxs -- /bin/bash
^Cthor@jump_host ~$ kubectl exec -it mysql-deployment-8b94c65c8-w2lxs -- /bin/bash
bash-4.4# printenv
MYSQL_PASSWORD=LQfKeWWxWD
MYSQL_PORT_3306_TCP_PROTO=tcp
HOSTNAME=mysql-deployment-8b94c65c8-w2lxs
MYSQL_DATABASE=kodekloud_db9
KUBERNETES_PORT_443_TCP_PROTO=tcp
MYSQL_SERVICE_PORT=3306
KUBERNETES_PORT_443_TCP_ADDR=10.96.0.1
MYSQL_ROOT_PASSWORD=YUIidhb667
MYSQL_PORT=tcp://10.96.224.32:3306
KUBERNETES_PORT=tcp://10.96.0.1:443
MYSQL_PORT_3306_TCP=tcp://10.96.224.32:3306
PWD=/
HOME=/root
MYSQL_MAJOR=innovation
GOSU_VERSION=1.17
MYSQL_USER=kodekloud_pop
MYSQL_PORT_3306_TCP_PORT=3306
KUBERNETES_SERVICE_PORT_HTTPS=443
MYSQL_PORT_3306_TCP_ADDR=10.96.224.32
KUBERNETES_PORT_443_TCP_PORT=443
MYSQL_VERSION=8.3.0-1.el8
KUBERNETES_PORT_443_TCP=tcp://10.96.0.1:443
TERM=xterm
SHLVL=1
KUBERNETES_SERVICE_PORT=443
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
KUBERNETES_SERVICE_HOST=10.96.0.1
MYSQL_SHELL_VERSION=8.3.0-1.el8
MYSQL_SERVICE_HOST=10.96.224.32
_=/usr/bin/printenv
bash-4.4#
