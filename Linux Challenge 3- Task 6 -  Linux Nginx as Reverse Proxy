Nautilus system admin's team is planning to deploy a front end application for their backup utility on Nautilus Backup Server, so that they can manage the backups of different websites from a graphical user interface. They have shared requirements to set up the same; please accomplish the tasks as per detail given below:


a. Install Apache Server on Nautilus Backup Server and configure it to use 6300 port (do not bind it to 127.0.0.1 only, keep it default i.e let Apache listen on server's IP, hostname, localhost, 127.0.0.1 etc).

b. Install Nginx webserver on Nautilus Backup Server and configure it to use 8093.

c. Configure Nginx as a reverse proxy server for Apache.

d. There is a sample index file /home/thor/index.html on Jump Host, copy that file to Apache's document root.

e. Make sure to start Apache and Nginx services.

f. You can test final changes using curl command, e.g curl http://<backup server IP or Hostname>:8093.

# Solution:
1. ssh clint@stbkp01 --> enter Password
2. sudo su -  --> Enter password
3. install httpd and nginx
    sudo yum install -y httpd
    sudo yum install -y epel-release 
    sudo yum install -y nginx
4. sudo vi  /etc/httpd/conf/httpd.conf
    i- Changed Listen from 80 to 6300 --> Listen 80 to 6300
    ii- Add ServerName ServerName 172.16.238.16:6000
5.  save the config and restart httpd
    sudo systemctl enable httpd
    sudo systemctl restart httpd
    sudo systemctl status httpd

  [clint@stbkp01 ~]$ cat /etc/httpd/conf/httpd.conf |grep Listen
  # Listen: Allows you to bind Apache to specific IP addresses and/or
  # Change this to Listen on specific IP addresses as shown below to 
  #Listen 12.34.56.78:80
  Listen 6300  
  [clint@stbkp01 ~]$ cat /etc/httpd/conf/httpd.conf |grep ServerName
  # ServerName gives the name and port that the server uses to identify itself.
  #ServerName www.example.com:80
  ServerName 172.16.238.16:6300

6. Go to nginx config
   sudo vi /etc/nginx/nginx.conf
       server {
        listen       8093 default_server;
        listen       [::]:8093 default_server;
        server_name  172.16.238.16;
        root         /usr/share/nginx/html;

        # Load configuration files for the default server block.
        include /etc/nginx/default.d/*.conf;

        location / {
             proxy_pass http://172.16.238.16:6300;
        }
7. Save it and restart nginx
   sudo systemctl restart nginx
8. Go to jump host and copy index.html file
   scp /home/index.html clint@stbkp01:/tmp
9. switch to backup server and copy it to httpd document root
   sudo cp /tmp/index.html /var/www/html
10. move to jump_host and check
    curl  http://172.16.238.16:8093

