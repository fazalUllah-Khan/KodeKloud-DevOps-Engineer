We have confidential data that needs to be transferred to a remote location, so we need to encrypt that data.We also need to decrypt data we received from a remote location in order to understand its content.


On storage server in Stratos Datacenter we have private and public keys stored at /home/*_key.asc. Use these keys to perform the following actions.


- Encrypt /home/encrypt_me.txt to /home/encrypted_me.asc.


- Decrypt /home/decrypt_me.asc to /home/decrypted_me.txt. (Passphrase for decryption and encryption is kodekloud).


- The user ID you can use is kodekloud@kodekloud.com.

# Solution
thor@jump_host ~$ ssh natasha@ststor01
The authenticity of host 'ststor01 (172.16.238.15)' can't be established.
ECDSA key fingerprint is SHA256:+ph85+7QHoH270vmarcYSJgmKWIRSboaKg3qpWslBGw.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added 'ststor01,172.16.238.15' (ECDSA) to the list of known hosts.
natasha@ststor01's password: 
Permission denied, please try again.
natasha@ststor01's password: 
[natasha@ststor01 ~]$ sudo su -

We trust you have received the usual lecture from the local System
Administrator. It usually boils down to these three things:

    #1) Respect the privacy of others.
    #2) Think before you type.
    #3) With great power comes great responsibility.

[sudo] password for natasha: 
[root@ststor01 ~]# cd /home/
[root@ststor01 home]# ls -l
total 24
drwx------ 1 ansible ansible 4096 Mar  6  2023 ansible
-rw-r--r-- 1 root    root     155 Apr  1 23:26 decrypt_me.asc
-rw-r--r-- 1 root    root      99 Apr  1 23:42 encrypt_me.txt
drwx------ 1 natasha natasha 4096 Apr 11  2023 natasha
-rw-r--r-- 1 root    root    3589 Apr  1 23:42 private_key.asc
-rw-r--r-- 1 root    root    1722 Apr  1 23:42 public_key.asc
[root@ststor01 home]# gpg --import public_key.asc
gpg: directory '/root/.gnupg' created
gpg: keybox '/root/.gnupg/pubring.kbx' created
gpg: /root/.gnupg/trustdb.gpg: trustdb created
gpg: key 8F17F26ECCE3AF51: public key "kodekloud <kodekloud@kodekloud.com>" imported
gpg: Total number processed: 1
gpg:               imported: 1
[root@ststor01 home]# gpg --import private_key.asc
gpg: key 8F17F26ECCE3AF51: "kodekloud <kodekloud@kodekloud.com>" not changed
gpg: key 8F17F26ECCE3AF51: secret key imported
gpg: Total number processed: 1
gpg:              unchanged: 1
gpg:       secret keys read: 1
gpg:   secret keys imported: 1
[root@ststor01 home]# gpg --list-keys
/root/.gnupg/pubring.kbx
------------------------
pub   rsa2048 2020-01-19 [SC]
      FEA85011C456B5E9AE5A516F8F17F26ECCE3AF51
uid           [ unknown] kodekloud <kodekloud@kodekloud.com>
sub   rsa2048 2020-01-19 [E]

[root@ststor01 home]# gpg --list-secret-keys
/root/.gnupg/pubring.kbx
------------------------
sec   rsa2048 2020-01-19 [SC]
      FEA85011C456B5E9AE5A516F8F17F26ECCE3AF51
uid           [ unknown] kodekloud <kodekloud@kodekloud.com>
ssb   rsa2048 2020-01-19 [E]

[root@ststor01 home]# gpg --encrypt -r kodekloud@kodekloud.com --armor < encrypt_me.txt  -o encrypted_me.asc
gpg: DD6B8506865C070D: There is no assurance this key belongs to the named user

sub  rsa2048/DD6B8506865C070D 2020-01-19 kodekloud <kodekloud@kodekloud.com>
 Primary key fingerprint: FEA8 5011 C456 B5E9 AE5A  516F 8F17 F26E CCE3 AF51
      Subkey fingerprint: 7B4B 5CFC 5E4F B4B6 EEC0  83E5 DD6B 8506 865C 070D

It is NOT certain that the key belongs to the person named
in the user ID.  If you *really* know what you are doing,
you may answer the next question with yes.

Use this key anyway? (y/N) y
[root@ststor01 home]# gpg --decrypt decrypt_me.asc > decrypted_me.txt
gpg: AES encrypted data
gpg: encrypted with 1 passphrase
[root@ststor01 home]# ls -l
total 32
drwx------ 1 ansible ansible 4096 Mar  6  2023 ansible
-rw-r--r-- 1 root    root     155 Apr  1 23:26 decrypt_me.asc
-rw-r--r-- 1 root    root      80 Apr  1 23:51 decrypted_me.txt
-rw-r--r-- 1 root    root      99 Apr  1 23:42 encrypt_me.txt
-rw-r--r-- 1 root    root     634 Apr  1 23:50 encrypted_me.asc
drwx------ 1 natasha natasha 4096 Apr 11  2023 natasha
-rw-r--r-- 1 root    root    3589 Apr  1 23:42 private_key.asc
-rw-r--r-- 1 root    root    1722 Apr  1 23:42 public_key.asc
[root@ststor01 home]# cat decrypted_me.txt
Welcome to xFusionCorp Industries. This is KodeKloud System Administration Lab 
[root@ststor01 home]# cat decrypted_me.asc
cat: decrypted_me.asc: No such file or directory
[root@ststor01 home]# cat decrypt_me.asc
'h'ҊOoD+)δ1RK*PH
L1!f    21 ԎZDvpFBCV(\59.9Ӫ%Rv[root@ststor01 home]# 
[root@ststor01 home]# cat encrypt_me.txt
My name is "My Name"

My credit card number is 1234-5678-9012-3456

The password for my phone is 42[root@ststor01 home]# 
[root@ststor01 home]# cat encrypted_me.asc
-----BEGIN PGP MESSAGE-----

hQEMA91rhQaGXAcNAQf/T2TJgrz0egVW+pSOZReQvCYf66p8GHpYwAWgSVIYfJhO
zLP75cYiCE4qVAYxKfmC3rmEqluifxMaNafcCSmqJMSVfi3sqmToFAGozI9yR354
eJP59QQecdTjMiZCQeJ/ug7F+VaG3xo1WlTklsZjiPWhCwY5TWjbcWWHblmQpSNZ
5SkVMtw7FAMO5BMHvsWg2upymJdnPKUpZMVkqOlAjiTtbx72sIb/pH7NEjafXbKl
YMiQNBdAry+yFOQzptY9GOZ4Six6w5Pze18NsBPn3KjRGuX9LT30ISPYrYD2bOCt
QzXzLpH+n+8rQMJrHDUv3dagQf0Cbos1hsbReBHAfNKUAdLuOLKRqb6JazA0DbGZ
IYx3kAXqs1BMNMBdZ73INyeCRw4N59lpoRNM26Jq7sFNLRSw5V5R08vGcoZEMYZa
bOtSHKyEQ3Vs2oxv5TB1N/4dLoG91hmLfzAlLp8OV+6Z+r/hVsRLp+94LzRfFLCZ
SYSSDtS+4ZB2eIes/mkPt+ozCCwJf/jbUQf/GZt+tEZuCWyrRw==
=t8Ve
-----END PGP MESSAGE-----
[root@ststor01 home]#

